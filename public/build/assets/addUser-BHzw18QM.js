import{q as _,r as d,W as z,j as e,Y as S}from"./app-c-LwwVAi.js";import{B as F,S as E}from"./index-CfW-uWm-.js";import{C as k,a as B,b as O,c as f,d as P,e as D}from"./index-BJCYPdax.js";import{A as L}from"./AuthenticatedLayout-D5UVxVqK.js";import{r as U,a as A}from"./dataSelect-CgJ9ePKZ.js";import{b as j,c as v}from"./index-BsDqT9Rl.js";import"./index-BQDTUAjS.js";const G=({organizations:n})=>{var p;const{auth:o}=_().props,[x,g]=d.useState(!1),[u,N]=d.useState(!1),[c,m]=d.useState([]),{data:r,setData:l,post:b,processing:H,errors:s}=z({organization_id:o.user.organization_id!==null?o.user.organization_id:"",company_id:"",organization:"",name:"",email:"",password:"",roles:"",status:"",password_confirmation:""});function w(a){a.preventDefault(),b(route("users.store"))}const h=a=>{const i=a.toLowerCase(),t=n==null?void 0:n.filter(C=>C.name.toLowerCase().includes(i));m(t)};d.useEffect(()=>{r.organization===""&&m([])},[r]);const y=(a,i)=>{l(t=>({...t,organization_id:a})),l(t=>({...t,organization:i})),m([])};return e.jsxs(L,{children:[e.jsx(S,{title:"Dashboard"}),e.jsx("main",{className:"",children:e.jsx(k,{children:e.jsxs(B,{children:[e.jsxs(O,{children:[e.jsx(f,{children:e.jsx(F,{url:"/users",label:"Voltar"})}),e.jsx(f,{children:e.jsx(e.Fragment,{})})]}),e.jsxs("form",{onSubmit:w,autoComplete:"off",children:[e.jsx(P,{className:" border-y border-gray-100",children:e.jsxs("div",{className:"px-3 my-4",children:[e.jsxs("div",{className:"grid md:grid-cols-6 gap-4",children:[o.user.organization_id!==null&&e.jsxs("div",{className:"flex flex-col col-span-2 relative",children:[e.jsx("label",{className:"label-form",htmlFor:"Organização",children:"Filial"}),e.jsxs("select",{name:"company_id",id:"company_id",onChange:a=>{l("company_id",a.target.value),h(a.target.value)},className:"input-form",children:[e.jsx("option",{value:"",children:"Selecione a filial"}),(p=n[0].company)==null?void 0:p.map((a,i)=>e.jsx("option",{value:a.subnumber,children:a.altername}))]}),s.company_id&&e.jsx("div",{className:"text-sm text-red-500",children:s.company_id})]}),o.user.organization_id===null&&e.jsxs("div",{className:"flex flex-col col-span-2 relative",children:[e.jsx("label",{className:"label-form",htmlFor:"Organização",children:"Organização"}),e.jsx("input",{type:"text",value:r.organization_id,onChange:a=>l("organization_id",a.target.value),className:"hidden"}),e.jsx("input",{id:"organization",type:"text",value:r.organization,onChange:a=>{l("organization",a.target.value),h(a.target.value)},className:"input-form"}),c.length>0&&e.jsx("div",{className:"absolute z-20 bg-gray-50 border-2 border-white shadow-md w-full rounded-sm top-16 max-h-52 overflow-y-auto",children:e.jsx("ul",{className:"p-1",children:c.map((a,i)=>e.jsx("li",{className:`flex items-center justify-normal ${i<c.length-1?"border-b border-gray-200":""}`,children:e.jsx("div",{className:"text-sm text-gray-600 p-1 cursor-pointer inline-block w-full",onClick:()=>y(a.id,a.name),children:a.name})},i))})}),s.organization_id&&e.jsx("div",{className:"text-sm text-red-500",children:s.organization_id})]}),e.jsxs("div",{className:"flex flex-col col-span-2",children:[e.jsx("label",{className:"label-form",htmlFor:"nome",children:"Nome"}),e.jsx("input",{id:"name",type:"text",value:r.name,onChange:a=>l("name",a.target.value),className:"input-form"}),s.name&&e.jsx("div",{className:"text-sm text-red-500",children:s.name})]}),e.jsxs("div",{className:"flex flex-col col-span-2",children:[e.jsx("label",{className:"label-form",htmlFor:"email",children:"E-mail"}),e.jsx("input",{id:"email",type:"text",value:r.email,onChange:a=>l("email",a.target.value),className:"input-form"}),s.email&&e.jsx("div",{className:"text-red-500",children:s.email})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 md:mt-6 mt-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"label-form",htmlFor:"password",children:"Senha"}),e.jsxs("div",{className:"flex items-center justify-between relative",children:[e.jsx("input",{id:"password",type:x?"text":"password",value:r.password,onChange:a=>l("password",a.target.value),className:"input-form w-full"}),e.jsx("div",{className:"absolute right-2 cursor-pointer text-gray-500",onClick:()=>g(a=>!a),children:x?e.jsx(j,{size:24}):e.jsx(v,{size:24})})]}),s.password&&e.jsx("div",{className:"text-sm text-red-500",children:s.password})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"label-form",htmlFor:"password_confirmation",children:"Repita a senha"}),e.jsxs("div",{className:"flex items-center justify-between relative",children:[e.jsx("input",{id:"password_confirmation",type:u?"text":"password",value:r.password_confirmation,onChange:a=>l("password_confirmation",a.target.value),className:"input-form w-full"}),e.jsx("div",{className:"absolute right-2 cursor-pointer text-gray-500",onClick:()=>N(a=>!a),children:u?e.jsx(j,{size:24}):e.jsx(v,{size:24})})]}),s.password_confirmation&&e.jsx("div",{className:"text-red-500",children:s.password_confirmation})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 md:mt-6 mt-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"label-form",htmlFor:"roles",children:"Função"}),e.jsxs("select",{id:"roles",value:r.roles,onChange:a=>l("roles",a.target.value),className:"input-form",children:[e.jsx("option",{value:"",children:"Selecione a função"}),U.map(a=>e.jsx("option",{value:a==null?void 0:a.value,children:a==null?void 0:a.label},a==null?void 0:a.value))]}),s.roles&&e.jsx("div",{className:"text-sm text-red-500",children:s.roles})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"label-form",htmlFor:"status",children:"Status"}),e.jsxs("select",{id:"status",value:r.status,onChange:a=>l("status",a.target.value),className:"input-form",children:[e.jsx("option",{value:"",children:"Selecione o status"}),A.map(a=>e.jsx("option",{value:a==null?void 0:a.value,children:a==null?void 0:a.label},a==null?void 0:a.value))]}),s.status&&e.jsx("div",{className:"text-red-500",children:s.status})]})]})]})}),e.jsx(D,{children:e.jsx(E,{})})]})]})})})]})};export{G as default};
