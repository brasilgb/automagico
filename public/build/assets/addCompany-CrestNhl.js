import{q as v,r as x,W as N,j as e,Y as C}from"./app-CRayIxTz.js";import{B as y,S as F}from"./index-D5rUEOql.js";import{C as w,H as z,T as S,B as k,a as B,b as L,c as h,d as E,e as _}from"./index-B3r_OQiS.js";import{A as T}from"./AuthenticatedLayout-DZZW71q_.js";import{s as A}from"./dataSelect-CgJ9ePKZ.js";import{m as H,a as I,b as P,c as D,u as d}from"./mask-BEZxBgSq.js";import{I as O}from"./index-CNS-7GL7.js";import"./index-DrEOADQA.js";import"./index-Dd_FAnU_.js";import"./ApplicationLogo-JGDVJUGO.js";const X=({organizations:i})=>{const{auth:u}=v().props,[c,m]=x.useState([]),{data:s,setData:t,post:p,progress:M,processing:R,errors:l}=N({organization_id:"",corpreason:"",altername:"",organization:"",status:"waiting",subnumber:"",subname:"",address:"",number:"",cep:"",county:"",state:"",neighborhood:"",cnpj:"",statereg:"",telephone:"",whatsapp:"",observation:""});function j(a){if(a.preventDefault(),(s==null?void 0:s.cnpj)!==""||(s==null?void 0:s.statereg)!=""){const o=d(s==null?void 0:s.cnpj),r=d(s==null?void 0:s.statereg);t(n=>({...n,cnpj:o})),t(n=>({...n,statereg:r}))}p(route("companies.store"))}const f=a=>{const o=a.toLowerCase(),r=i==null?void 0:i.filter(n=>n.name.toLowerCase().includes(o));m(r)};x.useEffect(()=>{s.organization===""&&m([])},[s]);const b=(a,o)=>{t(r=>({...r,organization_id:a})),t(r=>({...r,organization:o})),m([])},g=a=>{const o=d(a);fetch(`https://viacep.com.br/ws/${o}/json/`).then(r=>r.json()).then(r=>{t(n=>({...n,state:r.uf})),t(n=>({...n,county:r.localidade})),t(n=>({...n,neighborhood:r.bairro})),t(n=>({...n,address:r.logradouro}))}).catch(r=>console.error(r))};return e.jsxs(T,{children:[e.jsx(C,{title:"Dashboard"}),e.jsx("main",{className:"",children:e.jsxs(w,{children:[e.jsxs(z,{children:[e.jsxs(S,{children:[e.jsx(O,{size:30}),e.jsx("span",{className:"ml-2",children:"Filiais"})]}),e.jsx(k,{links:[{url:"/companies",label:"Filiais"},{url:null,label:"Adicionar filial"}]})]}),e.jsxs(B,{children:[e.jsxs(L,{children:[e.jsx(h,{children:e.jsx(y,{url:"/companies",label:"Voltar"})}),e.jsx(h,{children:e.jsx(e.Fragment,{})})]}),e.jsxs("form",{onSubmit:j,autoComplete:"off",children:[e.jsx(E,{className:" border-y border-gray-100",children:e.jsxs("div",{className:"px-3 my-4",children:[e.jsxs("div",{className:"grid md:grid-cols-7 gap-4 md:mt-6 mt-4",children:[e.jsxs("div",{className:"flex flex-col col-span-2",children:[e.jsx("label",{className:"label-form",htmlFor:"corpreason",children:"Razão social"}),e.jsx("input",{id:"corpreason",type:"text",value:s.corpreason,onChange:a=>{t("corpreason",a.target.value)},className:"input-form"}),l.corpreason&&e.jsx("div",{className:"text-sm text-red-500",children:l.corpreason})]}),e.jsxs("div",{className:"flex flex-col col-span-2",children:[e.jsx("label",{className:"label-form",htmlFor:"altername",children:"Nome alternativo"}),e.jsx("input",{id:"altername",type:"text",value:s.altername,onChange:a=>{t("altername",a.target.value)},className:"input-form"})]}),e.jsxs("div",{className:"flex flex-col col-span-2 relative",children:[e.jsx("label",{className:"label-form",htmlFor:"organization",children:"Organização"}),e.jsx("input",{type:"text",value:s.organization_id,onChange:a=>t("organization_id",a.target.value),className:"hidden"}),e.jsx("input",{id:"organization",type:"text",value:s.organization,onChange:a=>{t("organization",a.target.value),f(a.target.value)},className:"input-form",readOnly:u.user.organization_id!==null}),c.length>0&&e.jsx("div",{className:"absolute z-20 bg-gray-50 border-2 border-white shadow-md w-full rounded-sm top-16 max-h-52 overflow-y-auto",children:e.jsx("ul",{className:"p-1",children:c.map((a,o)=>e.jsx("li",{className:`flex items-center justify-normal ${o<c.length-1?"border-b border-gray-200":""}`,children:e.jsx("div",{className:"text-sm text-gray-600 p-1 cursor-pointer inline-block w-full",onClick:()=>b(a.id,a.name),children:a.name})},o))})}),l.organization_id&&e.jsx("div",{className:"text-sm text-red-500",children:l.organization_id})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"label-form",htmlFor:"status",children:"Status da filial"}),e.jsx("select",{id:"status",value:s.status,onChange:a=>{t("status",a.target.value)},className:"input-form",children:A.map(a=>e.jsx("option",{value:a.value,children:a.label}))}),l.status&&e.jsx("div",{className:"text-sm text-red-500",children:l.status})]})]}),e.jsxs("div",{className:"grid md:grid-cols-6 gap-4 md:mt-6 mt-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"label-form",htmlFor:"subnumber",children:"Nº Filial"}),e.jsx("input",{id:"subnumber",type:"text",value:s.subnumber,onChange:a=>t("subnumber",a.target.value),className:"input-form"}),l.subnumber&&e.jsx("div",{className:"text-sm text-red-500",children:l.subnumber})]}),e.jsxs("div",{className:"flex flex-col md:md:col-span-2",children:[e.jsx("label",{className:"label-form",htmlFor:"subname",children:"Nome filial"}),e.jsx("input",{id:"subname",type:"text",value:s.subname,onChange:a=>t("subname",a.target.value),className:"input-form"}),l.subname&&e.jsx("div",{className:"text-sm text-red-500",children:l.subname})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"label-form",htmlFor:"cep",children:"CEP"}),e.jsx("input",{id:"cep",type:"text",value:H(s.cep),onChange:a=>t("cep",a.target.value),onBlur:a=>g(a.target.value),className:"input-form",maxLength:9}),l.cep&&e.jsx("div",{className:"text-sm text-red-500",children:l.cep})]}),e.jsxs("div",{className:"flex flex-col md:col-span-2",children:[e.jsx("label",{className:"label-form",htmlFor:"address",children:"Endereço"}),e.jsx("input",{id:"address",type:"text",value:s.address,onChange:a=>t("address",a.target.value),className:"input-form"}),l.address&&e.jsx("div",{className:"text-sm text-red-500",children:l.address})]})]}),e.jsxs("div",{className:"grid md:grid-cols-6 gap-4 md:mt-6 mt-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"label-form",htmlFor:"number",children:"Número"}),e.jsx("input",{id:"number",type:"text",value:s.number,onChange:a=>t("number",a.target.value),className:"input-form"}),l.number&&e.jsx("div",{className:"text-sm text-red-500",children:l.number})]}),e.jsxs("div",{className:"flex flex-col md:col-span-2",children:[e.jsx("label",{className:"label-form",htmlFor:"county",children:"Municipio"}),e.jsx("input",{id:"county",type:"text",value:s.county,onChange:a=>t("county",a.target.value),className:"input-form"}),l.county&&e.jsx("div",{className:"text-sm text-red-500",children:l.county})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"label-form",htmlFor:"state",children:"UF"}),e.jsx("input",{id:"state",type:"text",value:s.state,onChange:a=>t("state",a.target.value),className:"input-form"}),l.state&&e.jsx("div",{className:"text-sm text-red-500",children:l.state})]}),e.jsxs("div",{className:"flex flex-col md:col-span-2",children:[e.jsx("label",{className:"label-form",htmlFor:"neighborhood",children:"Bairro"}),e.jsx("input",{id:"neighborhood",type:"text",value:s.neighborhood,onChange:a=>t("neighborhood",a.target.value),className:"input-form"}),l.neighborhood&&e.jsx("div",{className:"text-sm text-red-500",children:l.neighborhood})]})]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4 md:mt-6 mt-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"label-form",htmlFor:"cnpj",children:"CNPJ"}),e.jsx("input",{id:"cnpj",type:"text",value:I(s.cnpj),onChange:a=>t("cnpj",a.target.value),className:"input-form",maxLength:18}),l.cnpj&&e.jsx("div",{className:"text-sm text-red-500",children:l.cnpj})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"label-form",htmlFor:"statereg",children:"Inscrição"}),e.jsx("input",{id:"statereg",type:"text",value:P(s.statereg),onChange:a=>t("statereg",a.target.value),className:"input-form",maxLength:10}),l.statereg&&e.jsx("div",{className:"text-sm text-red-500",children:l.statereg})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"label-form",htmlFor:"telephone",children:"Telefone"}),e.jsx("input",{id:"telephone",type:"text",value:D(s.telephone),onChange:a=>t("telephone",a.target.value),className:"input-form",maxLength:15}),l.telephone&&e.jsx("div",{className:"text-sm text-red-500",children:l.telephone})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"label-form",htmlFor:"whatsapp",children:"Whatsapp(Ex.: 5551985471163)"}),e.jsx("input",{id:"whatsapp",type:"text",value:s.whatsapp,onChange:a=>t("whatsapp",a.target.value),className:"input-form",maxLength:13})]})]}),e.jsx("div",{className:"md:mt-6 mt-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"label-form",htmlFor:"observation",children:"Observação"}),e.jsx("textarea",{id:"observation",value:s.observation,onChange:a=>t("observation",a.target.value),className:"input-form"})]})})]})}),e.jsx(_,{children:e.jsx(F,{})})]})]})]})})]})};export{X as default};
